# Maintainer: Jochen Schalanda <jochen+aur@schalanda.name>
# Contributor: Mathieu Clabaut <mathieu.clabaut@gmail.com>
# Contributor: helios <aur@wiresphere.de>
# Last version visible on http://rubygems.org/gems/vagrant
pkgname=vagrant
pkgver=1.1.2
pkgrel=1
pkgdesc="Tool for building and distributing virtualized development environments"
arch=(any)
url="http://vagrantup.com/"
license=('MIT')
makedepends=('rubygems' 'rake')
makedepends=('rubygems' 'rake')
depends=('ruby' 'ruby-net-ssh>=2.6.5' 'ruby-net-scp>=1.1.0' 'ruby-erubis>=2.7.0' \
         'ruby-i18n>=0.6.0' 'ruby-log4r>=1.1.9' 'ruby-childprocess>=0.3.7')
makedepends=('ruby-contest>=0.1.2' 'ruby-minitest>=2.5.1' 'ruby-mocha' \
             'ruby-sys-proctable>=0.9.0' 'ruby-rspec-core>=2.11.0' \
             'ruby-rspec-expectations>=2.11.0' 'ruby-rspec-mocks>=2.11.0')
source=(https://github.com/mitchellh/${pkgname}/archive/v${pkgver}.tar.gz)
md5sums=('29c0fb4573e4a89bebd99e49d289239a')

build() {
  cd $srcdir/$pkgname-$pkgver

  rake build

  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
  gem install --no-user-install --ignore-dependencies \
    -i "$pkgdir$_gemdir" -n "$pkgdir"/usr/bin pkg/$pkgname-$pkgver.gem
}
