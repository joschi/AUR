# Contributor: Leo von Klenze <leo.vonklenze@tngtech.com> 
# Contributor: Jochen Schalanda <jochen+aur@schalanda.name> 
pkgname="atlassian-plugin-sdk"
pkgver=4.2.10
pkgrel=1
pkgdesc="Atlassian Plugin SDK for Developing Plugins for Atlassian Products"
arch=('i686' 'x86_64')
url="https://developer.atlassian.com/display/DOCS/Getting+Started"
license=('Apache License 2.0')
source=("https://maven.atlassian.com/public/com/atlassian/amps/${pkgname}/${pkgver}/${pkgname}-${pkgver}.tar.gz")
depends=(java-environment)

package()
{
	mkdir -p $pkgdir/opt/$pkgname

	cp -r "$srcdir"/$pkgname-$pkgver/* $pkgdir/opt/$pkgname

	# Set sane file permissions
	find "${pkgdir}" -type f -print0 | xargs -0 chmod 0644

	# Add executable flag to scripts
	chmod +x $pkgdir/opt/$pkgname/bin/*
	chmod +x $pkgdir/opt/$pkgname/apache-maven/bin/{mvn,mvnDebug}

	# update PATH
	mkdir -p $pkgdir/etc/profile.d
	echo "export PATH=\"\$PATH:/opt/$pkgname/bin\"" > $pkgdir/etc/profile.d/atlassian-plugin-sdk.sh
	echo "setenv PATH \${PATH}:/opt/$pkgdir/bin" > $pkgdir/etc/profile.d/atlassian-plugin-sdk.csh
	chmod +x $pkgdir/etc/profile.d/*
}
md5sums=('636f26607dccb3b03fa3b3409c399d8e')
