# Maintainer: Jochen Schalanda <jochen+aur@schalanda.name>
# Contributor: Massimiliano Torromeo <massimiliano.torromeo@gmail.com>
_pkgname='net-scp'
pkgname="ruby-${_pkgname}"
pkgver=1.2.0
pkgrel=1
pkgdesc='A pure Ruby implementation of the SCP client protocol'
arch=(any)
url="https://rubygems.org/gems/${_pkgname}"
license=('GPL')
depends=('ruby' 'ruby-net-ssh>=2.6.5')
source=("https://rubygems.org/downloads/${_pkgname}-${pkgver}.gem")
noextract=("${_pkgname}-${pkgver}.gem")
sha256sums=('942d38c55686a0fb69ee80d7d006ffffcf22d684146f4f07616cb15dd326377a')

package() {
  cd $srcdir
  local _gemdir="$(ruby -rubygems -e'puts Gem.default_dir')"
  gem install --no-user-install --ignore-dependencies \
    -i "$pkgdir$_gemdir" -n "$pkgdir"/usr/bin "${_pkgname}-${pkgver}.gem"
}
